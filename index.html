<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <!--Set visual viewport size for mobile devices to the device size,
            witch results in a scale of 1 and a 1:1 mapping between CSS pixels
            and Qt device independent pixels. -->

        <title>Canonic | Open Source QML Web Browser</title>
        <meta name="description" content="The Canonic browser is a free and open-source web browser for QML content."/>

        <meta property="og:title" content="Canonic | Open Source QML Web Browser"/>
        <meta property="og:description" content="Canonic is a free and open-source web browser for QML content."/>
        <meta property="og:url" content="https://www.canonic.com/"/>
        <meta property="og:image" content="https://www.canonic.com/assets/images/canonic_open_graph_image__01_10_2021.png"/>
        <meta property=og:type content=website/>
        <meta property="og:locale" content="en_GB" />

        <meta name="twitter:card" content="summary_large_image"></meta>

        <meta name="viewport" content="width=device-width, height=device-height, user-scalable=0" />

        <link rel="canonical" href="https://www.canonic.com/"/>
        <link rel="icon" type="image/svg+xml" href="/assets/images/favicon.svg">
        <link rel="icon" type="image/png" href="/assets/images/favicon.png">

        <meta name="keywords" content="canonic, qml, browser, search engine"/>
        <meta name="google-site-verification" content="3wZsBNLqAAwSlKC_tDYevrCBfgXZSj0dtIH_eAuGaHI" />

        <style>
            /* Make the html body cover the entire (visual) viewport with no scroll bars. */
            html {
                padding: 0;
                margin: 0;
                overflow: hidden;
                height: 100vh;
                background-color: #16181d;
                color: white;
                font-family: "Montserrat", sans-serif;
                font-weight: 300;
            }
            body {
                padding: 0;
                margin: 0;
                overflow: hidden;
                height: 100vh;
                background-color: #16181d;
                color: white;
                font-family: "Montserrat", sans-serif;
                font-weight: 300;
            }
            /* the canvas *must not* have any border or padding, or mouse coords will be wrong */
            canvas {
                border: 0px none;
                background-color: #16181d;
                height: 100%;
                width: 100%;
            }
            /* The contenteditable property is set to true for the canvas in order to support
            clipboard events. Hide the resulting focus frame and set the cursor back to
            the default cursor. */
            canvas {
                outline: 0px solid transparent;
                caret-color: transparent;
                cursor: default;
            }
            @keyframes spin {
                0% {
                    transform: rotate(0deg);
                }
                100% {
                    transform: rotate(360deg);
                }
            }
            @font-face {
                font-family: Garnet-Capitals-Bold;
                src: url("assets/fonts/Garnet-Capitals-Bold.woff"), url("assets/fonts/Garnet-Capitals-Bold.woff") format("woff");
            }
            @font-face {
                font-family: Garnet-Capitals-Light;
                src: url("assets/assets/fonts/Garnet-Capitals-Light.woff"), url("assets/fonts/Garnet-Capitals-Light.woff") format("woff");
            }
        </style>
        <link rel="preconnect" href="https://fonts.gstatic.com" />
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400&display=swap" rel="stylesheet" />
    </head>
    <body onload="init()">
        <figure
            style="overflow: hidden; width: 100%; height: 100%; margin: 0; padding: 0; position: absolute; display: flex; align-items: center; justify-content: center; opacity: 1; transition: opacity 1s; background-color: #16181d;"
            id="qtspinner"
        >
            <center style="line-height: 150%;">
                <!--<img src="qtlogo.svg" width="320" height="200" style="display:block"></img>-->
                <div>
                    <H1 style="font-family: 'Garnet-Capitals-Bold'; font-size: 63px; text-transform: capitalize; margin-bottom: 27px;">CANONIC</H1>
                    <div style="display: flex; justify-content: center; trasition: width 1s;">
                        <div style="color: #e9e9e9;" id="qtstatus">Loading WebAssembly Browser</div>
                        <div style="animation: spin 1.5s linear infinite; color: #15e888; margin-left: 12px;">üîæ</div>
                    </div>
                </div>
                <!-- <div id="qtstatus" style="color: #d1d1d1;font-size: 12px;">&nbsp</div> -->
                <noscript>JavaScript is disabled. Please enable JavaScript to use this application. </noscript>
            </center>
        </figure>
        <canvas id="qtcanvas" oncontextmenu="event.preventDefault()" contenteditable="true">
        <h2>QML web browser</h2>
        Canonic is an open-source web browser for QML content. It allows you to browse QML content (.qml) online within your native browser through a webassembly (WASM) web application.
        <h2>What is QML?</h2>
        QML (Qt Modeling Language) is a markup language designed for dynamic user interfaces. QML is designed to be used as a declarative language much CSS or HTML but allows for the use of inline Javascript to make imperative calls. For a high level comparison between HTML and QML think of HTML as a language designed for presenting decorated text documents where as QML is more suited to dynamic graphics content like games, user interfaces and 3d content. Traditionally QML is used in desktop or mobile applications however through webassembly it is now possible to run in a browser. Canonic enables you to browse qml web pages without having to go through the difficult process of compiling for webassembly. QML is also tightly integrated with c++, provides Qt‚Äôs well know signal and slots paradigm and the concept of property bindings.
        <h2>What is Canonic? </h2>
        The Canonic web browser is the first browser within a browser to enable the browsing of qml content. It is designed as an experimental test bed to explore what is required to bring QML to the web for programmers who prefer qml to html or who have little c++ experience.
        <h2>Why use QML online?</h2>
        QML is the perfect UI language for UI design. It natively accomplishes what is only possible through 3rd party libraries in HTML. If you are a Qt c++ programmer who already knows QML or a QML developer who would like to create a portfolio for your QML content canonic makes it easy for you to share your qml websites like any other.
        <h2>What does Canonic mean?</h2>
        Canonic gets it‚Äôs name from the use of Canonical links in web pages for search engines to determine original and authoritative content on the web. Canonical tags were introduced in 2009 for HTML as a way of identify ‚Äúauthoritative‚Äù or ‚Äúcanonical‚Äù content for search engines (Note that there is currently no analogue to canonical tags in QML). This prevents problems caused by duplicate content on a website or across the internet more generally. Canonicalization is a more general problem in computer science but in the context of urls and the web it can be though of as a process of converting data in to a single standard representation that can be compared more easily by people or machines. Search engines use these canonical urls as the single source of truth for content and generally rank canonical urls higher than urls with duplicate content.
        </canvas>
        <script type="text/javascript">
            var spinner = document.querySelector("#qtspinner");
            var canvas = document.querySelector("#qtcanvas");
            var simulateEventsTimer;

            function hideSpinner() {
                spinner.style.opacity = 0;
                spinner.style.pointerEvents = "none";
                clearTimeout(simulateEventsTimer);
            }

            function simulateEvent() {
                console.log("simulateevent <do nothing>")

                // There is a bug in qt wasm and this gets around it
                // Nothing displays / updates until an event is triggered
                canvas.dispatchEvent(new KeyboardEvent("keydown", {
                   key: "e",
                   keyCode: 69,
                   code: "KeyE",
                   which: 69,
                   shiftKey: false,
                   ctrlKey: false,
                   metaKey: false
                }));

                simulateEventsTimer = setTimeout(simulateEvent, 200);
            }

            function getInitialUrl() {
                var fragment = window.location.hash
                var initialUrl = ""

                // Strip the leading '#'
                if(fragment[0] === '#')
                {
                    fragment = fragment.substring(1)

                    // Strip the leading '!' (used for SEO)
                    if(fragment[0] === '!')
                    {
                        fragment = fragment.substring(1)
                    }
                }

                if(fragment)
                {
                    initialUrl = fragment
                }

                return initialUrl
            }

            function init() {
                var status = document.querySelector("#qtstatus");
                var qtLoader = QtLoader({
                    canvasElements: [canvas],

                    environment: { "CANONIC_INITIAL_URL": getInitialUrl() },

                    showLoader: function (loaderStatus) {
                        spinner.style.display = "flex";
                        canvas.style.display = "none";
                        status.innerHTML = loaderStatus + "...";
                    },
                    showError: function (errorText) {
                        status.innerHTML = errorText;
                        spinner.style.display = "flex";
                        canvas.style.display = "none";
                    },
                    showExit: function () {
                        status.innerHTML = "Application exit";
                        if (qtLoader.exitCode !== undefined) status.innerHTML += " with code " + qtLoader.exitCode;
                        if (qtLoader.exitText !== undefined) status.innerHTML += " (" + qtLoader.exitText + ")";
                        spinner.style.display = "flex";
                        canvas.style.display = "none";
                    },
                    showCanvas: function () {
                        canvas.style.display = "block";
                        simulateEventsTimer = setTimeout(simulateEvent, 200);
                    },

                    progressHandler: function(loadedBytes, totalBytes)
                    {
                        if (qtLoader.status === "Loading")
                        {
                            var percentage = Math.round(loadedBytes/totalBytes*100)
                            if(percentage > 100)
                            {
                                percentage = 100
                            }

                            if(percentage < 0)
                            {
                                percentage = 0
                            }

                            status.innerHTML = "Downloading & Compiling (" + percentage + "%)";
                        }
                    }
                });

                var localStorage = window.localStorage;
                var canonic_build = localStorage.getItem('canonic-build');

                if(canonic_build === null)
                {
                    canonic_build = 'release'
                }

                qtLoader.loadEmscriptenModule('canonic.' + canonic_build);
            }
            window.canonic = new Object();
            window.canonic.__hideSpinner = hideSpinner

            window.onhashchange = function() {
                window.location.reload()
            }
        </script>
        <script type="text/javascript" src="qtloader.js"></script>
    </body>
</html>
